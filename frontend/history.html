<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Lịch sử - QR Checker</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Quicksand:400,600,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
</head>
<body>
<header class="site-header">
  <nav class="nav">
    <div class="nav__brand">
      <a href="index.html" class="nav__logo">
        <img src="assets/qr-checker-logo.png" alt="QR Checker" class="nav__logo-img">
      </a>
      <span class="nav__title">QR Checker</span>
    </div>
    <input type="checkbox" id="nav-toggle">
    <label for="nav-toggle" class="nav__toggle"><span></span></label>
    <div class="nav__links">
      <a href="about.html">Giới thiệu</a>
      <a href="guide.html">Hướng dẫn</a>
      <a href="create.html">Tạo mã QR</a>
      <a href="history.html" class="active">Lịch sử</a>
      <a id="nav-auth" class="btn-small" href="login.html">Đăng nhập</a>
    </div>
  </nav>
</header>

<section id="auth-guard" class="scan-wrapper" style="padding-top:40px; display:none;">
  <div class="card" style="max-width:720px;margin:0 auto;text-align:center;">
    <h2>Bạn cần đăng nhập</h2>
    <p class="small">Hãy đăng nhập để xem Lịch sử quét.</p>
    <div class="hero__actions" style="margin-top:12px; display:flex; justify-content:center;">
      <a id="guard-login" class="btn btn--primary">Đăng nhập</a>
    </div>
  </div>
</section>

<section id="feature-content" class="scan-wrapper" style="padding-top:40px; display:none;">
  <h1 class="section-title">Lịch sử quét</h1>
  <div class="card" style="max-width:900px;margin:0 auto;">
    <span class="badge">Coming soon</span>
    <h2 style="margin:8px 0 6px;">Tính năng sắp ra mắt</h2>
    <p>Trang lịch sử giúp bạn xem lại các QR đã quét, trạng thái an toàn và chi tiết phân tích.</p>
    <p class="mt-1">Sắp có: lọc theo thời gian/kết quả, tìm kiếm, xóa từng dòng hoặc toàn bộ.</p>

    <div class="quick-section" style="margin-top:14px;">
      <h2>Tính năng dự kiến</h2>
      <ul>
        <li>Nhật ký quét mã QR.</li>
        <li>Nhật ký tạo mã QR</li>
        <li>Giám sát mã QR để phát hiện hành vi đáng ngờ.</li>
        <li>Thông báo khi phát hiện hành vi đáng ngờ.</li>
      </ul>
    </div>

    <div class="quick-section">
      <h2>Lộ trình phát triển</h2>
      <ul>
        <li>Giai đoạn 1: Lưu lịch sử quét mã QR</li>
        <li>Giai đoạn 2: Lưu lịch sử tạo mã QR</li>
        <li>Giai đoạn 3: Giám sát và thông báo khi phát hiện hành vi đáng ngờ.</li>
      </ul>
    </div>

    <div class="hero__actions" style="margin-top:8px;">
      <a class="btn btn--primary" href="index.html#scan">Quét mã ngay</a>
      <a class="btn btn--primary" href="about.html">Giới thiệu</a>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer class="site-footer">
  <div class="footer-grid">
    <div>
      <h4>QR Checker</h4>
      <p class="small">Nền tảng kiểm tra & tạo QR an toàn.</p>
    </div>
    <div>
      <h5>Chức năng</h5>
      <ul>
        <li><a href="#scan">Quét mã QR</a></li>
        <li><a href="create.html">Tạo mã</a></li>
        <li><a href="history.html">Lịch sử</a></li>
      </ul>
    </div>
    <div>
      <h5>Hỗ trợ</h5>
      <ul>
        <li><a href="guide.html">Hướng dẫn</a></li>
        <li><a href="about.html">Giới thiệu</a></li>
      </ul>
    </div>
  </div>
  <div class="copy small">© 2025 QR Checker</div>
</footer>

<script>
// Navbar auth label/link
(async function(){
  const next = location.pathname + location.search + location.hash;
  const a = document.getElementById('nav-auth');
  const guard = document.getElementById('auth-guard');
  const content = document.getElementById('feature-content');
  const r = await fetch('/me', {credentials:'include'}).catch(()=>null);
  const authed = !!r && r.status === 200;

  if(a){
    if(authed){ a.textContent='Tài khoản'; a.href='account.html'; }
    else{ a.textContent='Đăng nhập'; a.href='login.html?next=' + encodeURIComponent(location.pathname); }
  }
  if(authed){
    if(content) content.style.display='block';
    if(guard) guard.style.display='none';
  }else{
    if(content) content.style.display='none';
    if(guard) guard.style.display='block';
    const btn = document.getElementById('guard-login');
    if(btn) btn.href = 'login.html?next=' + encodeURIComponent(next);
  }
})();
</script>
</body>
</html>